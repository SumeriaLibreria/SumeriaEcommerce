(function(a){'use strict';a.HSCore.components.HSUnfold={_baseConfig:{unfoldEvent:'click',unfoldType:'simple',unfoldDuration:300,unfoldEasing:'linear',unfoldAnimationIn:'fadeIn',unfoldAnimationOut:'fadeOut',unfoldHideOnScroll:!0,unfoldHideOnBlur:!1,unfoldDelay:350,unfoldOpenedElement:'init',unfoldOverlay:!1,afterOpen:function(a){},beforeClose:function(a){},afterClose:function(a){}},_pageCollection:a(),init:function(f,g){var b,h;if(!f||!f.length)return;return b=this,f.each(function(l,j){var f=a(j),i,k;if(f.data('HSUnfold'))return;switch(i=g&&a.isPlainObject(g)?a.extend(!0,{},b._baseConfig,g,f.data()):a.extend(!0,{},b._baseConfig,f.data()),i.unfoldType){case'css-animation':f.data('HSUnfold',new d(f,i));break;case'jquery-slide':f.data('HSUnfold',new e(f,i));break;default:f.data('HSUnfold',new c(f,i))}b._pageCollection=b._pageCollection.add(f),b._bindEvents(f,i.unfoldEvent,i.unfoldDelay),k=a(j).data('HSUnfold'),h=a(k.target).find('input, textarea').length,a(k.target).find('[data-unfold-target]').length&&f.addClass('target-of-invoker-has-unfolds')}),a(document).on('click touchstart','body',function(c){if(c.target.id===b._baseConfig.unfoldOpenedElement)return;if(a(c.target).closest('#'+b._baseConfig.unfoldOpenedElement).length)return;b._pageCollection.each(function(f,c){var e=window.innerWidth,d=Boolean(a(c).data('is-mobile-only'));d?d&&e<769&&a(c).data('HSUnfold').hide():a(c).data('HSUnfold').hide(),a(c).data('HSUnfold').config.unfoldOverlay&&a('.'+a(c).data('HSUnfold').config.unfoldOverlay.className).fadeOut(a(c).data('HSUnfold').config.unfoldOverlay.animationSpeed?a(c).data('HSUnfold').config.unfoldOverlay.animationSpeed:200),a(c).data('HSUnfold').config.beforeClose.call(b.target,b.element)})}),a(window).on('scroll.HSUnfold',function(){b._pageCollection.each(function(d,c){var b=a(c).data('HSUnfold');b.getOption('unfoldHideOnScroll')&&h===0?b.hide():b.getOption('unfoldHideOnScroll')&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&b.hide()})}),a(window).on('resize.HSUnfold',function(){b._resizeTimeOutId&&clearTimeout(b._resizeTimeOutId),b._resizeTimeOutId=setTimeout(function(){b._pageCollection.each(function(d,c){var b=a(c).data('HSUnfold');b.smartPosition(b.target)})},50)}),a(document).on('keydown.HSUnfold',function(c){a('body').hasClass('u-unfold-opened')&&((c.keyCode&&c.keyCode===38||c.keyCode&&c.keyCode===40)&&c.preventDefault(),c.keyCode&&c.keyCode===27&&(b._pageCollection.each(function(c,b){a(b).data('HSUnfold').hide()}),a('body').removeClass('u-unfold-opened')))}),f},_bindEvents:function(b,e,c){var g=this,d=a(b.data('unfold-target')),h,i;e==='hover'&&!f()?(b.on('mouseenter.HSUnfold',function(){var c=a(this),b=c.data('HSUnfold');if(!b)return;b.unfoldTimeOut&&clearTimeout(b.unfoldTimeOut),b.show(),a('body').addClass('u-unfold-opened')}).on('mouseleave.HSUnfold',function(){var d=a(this),b=d.data('HSUnfold');if(!b)return;b.unfoldTimeOut=setTimeout(function(){b.hide(),a('body').removeClass('u-unfold-opened')},c)}),d.length&&d.on('mouseenter.HSUnfold',function(){var a=b.data('HSUnfold');a.unfoldTimeOut&&clearTimeout(a.unfoldTimeOut),a.show()}).on('mouseleave.HSUnfold',function(){var a=b.data('HSUnfold');a.unfoldTimeOut=setTimeout(function(){a.hide()},c)})):(b.on('click.HSUnfold',function(c){var b=a(this),d=a('[data-unfold-target].active:not(.target-of-invoker-has-unfolds)'),e=a('[data-unfold-target].active.target-of-invoker-has-unfolds');if(g._baseConfig.unfoldOpenedElement=b.data('HSUnfold').target[0].id,!b.data('HSUnfold'))return;b.hasClass('target-of-invoker-has-unfolds')?e.length&&e.data('HSUnfold').toggle():d.length&&d.data('HSUnfold').toggle(),b.data('HSUnfold').toggle(),a('body').toggleClass('u-unfold-opened'),c.stopPropagation(),c.preventDefault()}),Boolean(b.data('unfold-target-is-menu'))&&(h=a(b.data('unfold-target')),i=h.children(),i.on('click',function(){b.data('HSUnfold').toggle()})))}};function f(){return'ontouchstart'in window}function b(c,d){var b=this;return!!c.length&&(b.element=c,b.config=d,b.target=a(b.element.data('unfold-target')),b.allInvokers=a('[data-unfold-target="'+b.element.data('unfold-target')+'"]'),b.toggle=function(){if(!b.target.length)return b;var d=b.element[0].dataset,c=!!d.unfoldOverlay&&JSON.parse(d.unfoldOverlay);return b.defaultState?(d.unfoldOverlay&&(a('.'+c.className).length||a('<div class="'+c.className+'" style="background-color: '+c.background+'"></div>').prependTo('body'),a('.'+c.className).length&&a('.'+c.className).fadeIn(c.animationSpeed?c.animationSpeed:200)),b.show()):(d.unfoldOverlay&&a('.'+c.className).length&&a('.'+c.className).fadeOut(c.animationSpeed?c.animationSpeed:200),b.hide()),b},this.smartPosition=function(b){b.data('baseDirection')&&b.css(b.data('baseDirection').direction,b.data('baseDirection').value),b.removeClass('u-unfold--reverse-y');var d=a(window),e=getComputedStyle(b.get(0)),f=Math.abs(parseInt(e.left,10))<40?'left':'right',c=b.offset();f==='right'?(b.data('baseDirection')||b.data('baseDirection',{direction:'right',value:parseInt(e.right,10)}),c.left<0&&b.css('right',(parseInt(b.css('right'),10)-(c.left-10))*-1)):(b.data('baseDirection')||b.data('baseDirection',{direction:'left',value:parseInt(e.left,10)}),c.left+b.outerWidth()>d.width()&&b.css('left',parseInt(b.css('left'),10)-(c.left+b.outerWidth()+10-d.width()))),c.top+b.outerHeight()-d.scrollTop()>d.height()&&b.addClass('u-unfold--reverse-y')},this.getOption=function(a){return this.config[a]?this.config[a]:null},!0)}function c(a,c){if(!b.call(this,a,c))return;Object.defineProperty(this,'defaultState',{get:function(){return this.target.hasClass('u-unfold--hidden')}}),this.target.addClass('u-unfold--simple'),this.hide()}function d(c,d){if(!b.call(this,c,d))return;var a=this;this.target.addClass('u-unfold--css-animation u-unfold--hidden').css('animation-duration',a.config.unfoldDuration+'ms'),Object.defineProperty(this,'defaultState',{get:function(){return this.target.hasClass('u-unfold--hidden')}}),this.target.length&&this.target.on('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend',function(b){a.target.hasClass(a.config.unfoldAnimationOut)&&(a.target.removeClass(a.config.unfoldAnimationOut).addClass('u-unfold--hidden'),a.allInvokers.length&&a.allInvokers.attr('aria-expanded','false'),a.config.afterClose.call(a.target,a.element)),a.target.hasClass(a.config.unfoldAnimationIn)&&(a.allInvokers.length&&a.allInvokers.attr('aria-expanded','true'),a.config.afterOpen.call(a.target,a.element)),b.preventDefault(),b.stopPropagation()})}function e(a,c){if(!b.call(this,a,c))return;this.target.addClass('u-unfold--jquery-slide u-unfold--hidden').hide(),Object.defineProperty(this,'defaultState',{get:function(){return this.target.hasClass('u-unfold--hidden')}})}c.prototype.show=function(){var b=a(this)[0].config.unfoldTarget;return a('[data-unfold-target="'+b+'"]').addClass('active'),this.smartPosition(this.target),this.target.removeClass('u-unfold--hidden'),this.allInvokers.length&&this.allInvokers.attr('aria-expanded','true'),this.config.afterOpen.call(this.target,this.element),this},c.prototype.hide=function(){var b=a(this)[0].config.unfoldTarget;return a('[data-unfold-target="'+b+'"]').removeClass('active'),this.target.addClass('u-unfold--hidden'),this.allInvokers.length&&this.allInvokers.attr('aria-expanded','false'),this.config.afterClose.call(this.target,this.element),this},d.prototype.show=function(){var b=this,c=a(b)[0].config.unfoldTarget;a('[data-unfold-target="'+c+'"]').addClass('active'),b.smartPosition(b.target),b.target.removeClass('u-unfold--hidden').removeClass(b.config.unfoldAnimationOut),b.target.addClass(b.config.unfoldAnimationIn),b.config.afterOpen.call(b.target,b.element)},d.prototype.hide=function(){var b=a(this)[0].config.unfoldTarget;a('[data-unfold-target="'+b+'"]').removeClass('active'),this.target.removeClass(this.config.unfoldAnimationIn).addClass(this.config.unfoldAnimationOut)},e.prototype.show=function(){var b=this,c=a(this)[0].config.unfoldTarget;a('[data-unfold-target="'+c+'"]').addClass('active'),this.smartPosition(this.target),this.target.removeClass('u-unfold--hidden').stop().slideDown({duration:b.config.unfoldDuration,easing:b.config.unfoldEasing,complete:function(){b.config.afterOpen.call(b.target,b.element)}})},e.prototype.hide=function(){var b=this,c=a(this)[0].config.unfoldTarget;a('[data-unfold-target="'+c+'"]').removeClass('active'),this.target.slideUp({duration:b.config.unfoldDuration,easing:b.config.unfoldEasing,complete:function(){b.config.afterClose.call(b.target,b.element),b.target.addClass('u-unfold--hidden')}})}})(jQuery)