(function(a){'use strict';a.HSCore.components.HSScrollNav={_baseConfig:{duration:400,easing:'linear',over:a(),sectionClass:'u-scroll-nav-section',customOffsetTop:0,activeItemClass:'active',activeSectionClass:'active',afterShow:function(){},beforeShow:function(){},parent:a('.u-header')},_pageCollection:a(),init:function(d,e){var c=this;return!d||!d.length?a():(d.each(function(h,f){var d=a(f),g=e&&a.isPlainObject(e)?a.extend(!0,{},c._baseConfig,e,d.data()):a.extend(!0,{},c._baseConfig,d.data());d.data('HSScrollNav')||(d.data('HSScrollNav',new b(d,g)),c._pageCollection=c._pageCollection.add(d))}),a(window).on('scroll.HSScrollNav',function(){c._pageCollection.each(function(c,b){a(b).data('HSScrollNav').highlight()})}).trigger('scroll.HSScrollNav'),d)}};function b(b,c){this.element=b,this.config=c,this._items=a(),this._makeItems(),this._bindEvents()}b.prototype._makeItems=function(){var b=this;this.element.find('a[href^="#"]').each(function(f,e){var d=a(e);d.data('HSScrollNavSection')||(d.data('HSScrollNavSection',new c(d,b.config)),b._items=b._items.add(d))})},b.prototype._bindEvents=function(){var b=this;this.element.on('click.HSScrollNav','a[href^="#"]',function(g){var c=this,d=a(this).data('HSScrollNavSection'),e=a(b.element).parent(),f=e.attr('id'),h=window.innerWidth,i=Boolean(b.element[0].dataset.mobileDestroy);h<=769&&i===!0?(a('[data-target="#'+f+'"]').trigger('click'),a('[data-target="#'+f+'"] > .u-hamburger__box').removeClass('is-active'),e.on('hidden.bs.collapse',function(){b._lockHightlight=!0,b.current&&b.current.unhighlight(),c.blur(),b.current=a(c).data('HSScrollNavSection'),b.current.highlight(),d.show(function(){b._lockHightlight=!1})})):(b._lockHightlight=!0,b.current&&b.current.unhighlight(),c.blur(),b.current=a(c).data('HSScrollNavSection'),b.current.highlight(),d.show(function(){b._lockHightlight=!1})),g.preventDefault()})},b.prototype.highlight=function(){var d=this,e,f,b,c;if(!this._items.length||this._lockHightlight)return;if(c=a(window).scrollTop(),c+a(window).height()===a(document).height()){this.current=this._items.last().data('HSScrollNavSection'),this.unhighlight(),this.current.highlight(),this.current.changeHash();return}this._items.each(function(f,e){var d=a(e).data('HSScrollNavSection'),g=d.section;c>d.offset&&(b=d)}),b&&this.current!==b&&(this.unhighlight(),b.highlight(),this.current&&b.changeHash(),this.current=b)},b.prototype.unhighlight=function(){this._items.each(function(c,b){a(b).data('HSScrollNavSection').unhighlight()})};function c(d,c){var b=this;this.element=d,this.config=c,Object.defineProperty(this,'section',{value:a(b.element.attr('href'))}),Object.defineProperty(this,'offset',{get:function(){var d=c.parent,e=getComputedStyle(d.get(0)),f=e.position,a=b.section.offset().top;return d.length&&f=='fixed'&&parseInt(e.top)==0&&(a=a-d.outerHeight()-parseInt(e.marginTop)),b.config.over.length&&(a=a-b.config.over.outerHeight()),a}})}c.prototype.show=function(c){var b=this;if(!this.section.length)return;b.config.beforeShow.call(b.section),this.changeHash(),a('html, body').stop().animate({scrollTop:b.offset+b.config.customOffsetTop},{duration:b.config.duration,easing:b.config.easing,complete:function(){a('html, body').stop().animate({scrollTop:b.offset+b.config.customOffsetTop},{duration:b.config.duration,easing:b.config.easing,complete:function(){b.config.afterShow.call(b.section),a.isFunction(c)&&c()}})}})},c.prototype.changeHash=function(){this.section.attr('id',''),a(this.config.sectionClass).removeClass(this.config.activeSectionClass),this.section.addClass(this.config.activeSectionClass),window.location.hash=this.element.attr('href'),this.section.attr('id',this.element.attr('href').slice(1))},c.prototype.highlight=function(){var a=this.element.parent('li');a.length&&a.addClass(this.config.activeItemClass)},c.prototype.unhighlight=function(){var a=this.element.parent('li');a.length&&a.removeClass(this.config.activeItemClass)}})(jQuery)